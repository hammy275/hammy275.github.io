<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(2)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(7) > ul > li:nth-child(2) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(7) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(7) > ul > li:nth-child(2) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(7) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(7) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>The ImmersiveHandler | ImmersiveMC Wiki</title> <meta name="generator" content="Jekyll v3.9.3" /> <meta property="og:title" content="The ImmersiveHandler" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="The wiki for the Minecraft mod ImmersiveMC!" /> <meta property="og:description" content="The wiki for the Minecraft mod ImmersiveMC!" /> <link rel="canonical" href="https://hammy275.github.io/api/handler.html" /> <meta property="og:url" content="https://hammy275.github.io/api/handler.html" /> <meta property="og:site_name" content="ImmersiveMC Wiki" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="The ImmersiveHandler" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"The wiki for the Minecraft mod ImmersiveMC!","headline":"The ImmersiveHandler","url":"https://hammy275.github.io/api/handler.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> ImmersiveMC Wiki </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">ImmersiveMC Wiki</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Immersives category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/both/" class="nav-list-link">Immersives</a><ul class="nav-list"><li class="nav-list-item"><a href="/both/anvil.html" class="nav-list-link">Anvil</a></li><li class="nav-list-item"><a href="/both/barrel.html" class="nav-list-link">Barrel</a></li><li class="nav-list-item"><a href="/both/beacon.html" class="nav-list-link">Beacon</a></li><li class="nav-list-item"><a href="/both/brewing_stand.html" class="nav-list-link">Brewing Stand</a></li><li class="nav-list-item"><a href="/both/chest.html" class="nav-list-link">Chest</a></li><li class="nav-list-item"><a href="/both/crafting_table.html" class="nav-list-link">Crafting Table</a></li><li class="nav-list-item"><a href="/both/enchanting_table.html" class="nav-list-link">Enchanting Table</a></li><li class="nav-list-item"><a href="/both/furnace.html" class="nav-list-link">Furnace</a></li><li class="nav-list-item"><a href="/both/grindstone.html" class="nav-list-link">Grindstone</a></li><li class="nav-list-item"><a href="/both/hopper.html" class="nav-list-link">Hopper</a></li><li class="nav-list-item"><a href="/both/lectern_and_written_book.html" class="nav-list-link">Lectern and Written Book</a></li><li class="nav-list-item"><a href="/both/shulker_box.html" class="nav-list-link">Shulker Box</a></li><li class="nav-list-item"><a href="/both/smithing_table.html" class="nav-list-link">Smithing Table</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in VR Only Immersives category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/vr/" class="nav-list-link">VR Only Immersives</a><ul class="nav-list"><li class="nav-list-item"><a href="/vr/bag.html" class="nav-list-link">Bag</a></li><li class="nav-list-item"><a href="/vr/bottles_buckets_and_liquids.html" class="nav-list-link">Bottles, Buckets, and Liquids</a></li><li class="nav-list-item"><a href="/vr/breeding_animals.html" class="nav-list-link">Breeding Animals</a></li><li class="nav-list-item"><a href="/vr/buttons_and_levers.html" class="nav-list-link">Buttons and Levers</a></li><li class="nav-list-item"><a href="/vr/campfire.html" class="nav-list-link">Campfire</a></li><li class="nav-list-item"><a href="/vr/chiseled_bookshelf.html" class="nav-list-link">Chiseled Bookshelf</a></li><li class="nav-list-item"><a href="/vr/doors_and_gates.html" class="nav-list-link">Doors and Gates</a></li><li class="nav-list-item"><a href="/vr/equipping_armor.html" class="nav-list-link">Equipping Armor</a></li><li class="nav-list-item"><a href="/vr/fishing.html" class="nav-list-link">Fishing</a></li><li class="nav-list-item"><a href="/vr/jukebox.html" class="nav-list-link">Jukebox</a></li><li class="nav-list-item"><a href="/vr/petting_pets.html" class="nav-list-link">Petting Pets</a></li><li class="nav-list-item"><a href="/vr/ranged_grab.html" class="nav-list-link">Ranged Grab</a></li><li class="nav-list-item"><a href="/vr/repeater.html" class="nav-list-link">Repeater</a></li><li class="nav-list-item"><a href="/vr/shields.html" class="nav-list-link">Shields</a></li><li class="nav-list-item"><a href="/vr/throwing.html" class="nav-list-link">Throwing</a></li></ul></li><li class="nav-list-item"><a href="/faq.html" class="nav-list-link">FAQ</a></li><li class="nav-list-item"><a href="/mod_compat.html" class="nav-list-link">Inter-Mod Compatibility</a></li><li class="nav-list-item"><a href="/contributing.html" class="nav-list-link">Contributing</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in The ImmersiveMC API category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/api/" class="nav-list-link">The ImmersiveMC API</a><ul class="nav-list"><li class="nav-list-item"><a href="/api/what_is_an_immersive.html" class="nav-list-link">What is an Immersive?</a></li><li class="nav-list-item"><a href="/api/handler.html" class="nav-list-link">The ImmersiveHandler</a></li><li class="nav-list-item"><a href="/api/builder.html" class="nav-list-link">The ImmersiveBuilder</a></li><li class="nav-list-item"><a href="/api/everything_else.html" class="nav-list-link">Everything Else</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search ImmersiveMC Wiki" aria-label="Search ImmersiveMC Wiki" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/api/">The ImmersiveMC API</a></li> <li class="breadcrumb-nav-list-item"><span>The ImmersiveHandler</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="the-immersivehandler"> <a href="#the-immersivehandler" class="anchor-heading" aria-labelledby="the-immersivehandler"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The <code class="language-plaintext highlighter-rouge">ImmersiveHandler</code> </h1> <p>Any good block-based Immersive is divided into two portions: its <code class="language-plaintext highlighter-rouge">ImmersiveHandler</code> and its <code class="language-plaintext highlighter-rouge">Immersive</code>. The <code class="language-plaintext highlighter-rouge">Immersive</code> portion covers anything only performed by the client, while the <code class="language-plaintext highlighter-rouge">ImmersiveHandler</code> covers everything else. Since an <code class="language-plaintext highlighter-rouge">Immersive</code> requires an <code class="language-plaintext highlighter-rouge">ImmersiveHandler</code> to even be fully-built, we’ll start by making one first.</p> <h2 id="making-your-immersivehandler"> <a href="#making-your-immersivehandler" class="anchor-heading" aria-labelledby="making-your-immersivehandler"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Making Your <code class="language-plaintext highlighter-rouge">ImmersiveHandler</code> </h2> <p>Go ahead and make a new class, and have it implement the <code class="language-plaintext highlighter-rouge">ImmersiveHandler</code> interface. For now, make the type parameter ImmersiveMC’s <code class="language-plaintext highlighter-rouge">NetworkStorage</code> interface, we’ll get back to this later.</p> <p>At this point, your IDE should generate a lot of methods for you to complete. Let’s go over them one-by-one, then get into the finer details on some of the interfaces being used here.</p> <ul> <li><code class="language-plaintext highlighter-rouge">makeInventoryContents()</code>: Although the server knows of the contents of a block, such as the items in a chest, the client doesn’t know about them until they open that block’s GUI! ImmersiveMC doesn’t use GUIs however, so it needs to send the contents separately. This function is used to retrieve an object that can be encoded into a buffer to send the contents of the block to the client.</li> <li><code class="language-plaintext highlighter-rouge">getEmptyNetworkStorage()</code>: When the client receives the buffer, it calls this function to get a <code class="language-plaintext highlighter-rouge">NetworkStorage</code> instance before calling its <code class="language-plaintext highlighter-rouge">decode()</code> function.</li> <li><code class="language-plaintext highlighter-rouge">swap()</code>: All Immersive interactions happen initially on the client. When such an interaction happens, the client tells the server which slot it interacted with and at what position. This is where the server should perform the action that should take place! For example, if the user interacted with slot 0 of an empty furnace with a raw porkchop in their hand, your <code class="language-plaintext highlighter-rouge">swap()</code> implementation would want to move the raw porkchop into the empty furnace slot.</li> <li><code class="language-plaintext highlighter-rouge">isDirtyForClientSync()</code>: To prevent sending the contents of every block all the time, ImmersiveMC only sends block contents to the client on a given tick where this function returns <code class="language-plaintext highlighter-rouge">true</code>.</li> <li><code class="language-plaintext highlighter-rouge">isValidBlock()</code>: This function should simply return whether the provided block position in the given level matches this Immersive.</li> <li><code class="language-plaintext highlighter-rouge">enabledInConfig()</code>: This function should declare whether this Immersive is enabled in the provided player’s configuration. If you don’t have or want to provide configuration for this Immersive, simply return <code class="language-plaintext highlighter-rouge">true</code> here.</li> <li><code class="language-plaintext highlighter-rouge">clientAuthoritative()</code>: Normally, Immersives exist on the client the first time they receive inventory contents from the server. If this is <code class="language-plaintext highlighter-rouge">true</code>, they will instead activate the moment they can. Immersives which return <code class="language-plaintext highlighter-rouge">true</code> for this should <em>always</em> return <code class="language-plaintext highlighter-rouge">false</code> for <code class="language-plaintext highlighter-rouge">isDirtyForClientSync()</code>. If this is your first Immersive, simply return <code class="language-plaintext highlighter-rouge">false</code> from here, you’re still learning!</li> <li><code class="language-plaintext highlighter-rouge">getID()</code>: An ID that uniquely identifies your Immersive. Make sure to keep it in your mod’s namespace!</li> <li><code class="language-plaintext highlighter-rouge">onStopTracking()</code> (optional): This function gets called on the server-side when an Immersive stops being tracked. You don’t need to implement this, but you may find it useful for your Immersive!</li> </ul> <p>That was a lot! Even worse, looking in your IDE, you’ll notice that some of these methods use even more interfaces from ImmersiveMC! Let’s break those down real quick:</p> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Interface Name</strong></th> <th><strong>Methods That Use It</strong></th> <th><strong>What It Is</strong></th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">NetworkStorage</code></td> <td><code class="language-plaintext highlighter-rouge">makeInventoryContents()</code> and <code class="language-plaintext highlighter-rouge">getEmptyNetworkStorage()</code></td> <td>This object should hold all the data that needs to sync from the server to the client. <code class="language-plaintext highlighter-rouge">encode()</code> should place the data into a byte buffer, while <code class="language-plaintext highlighter-rouge">decode()</code> should turn an instance of this object created from <code class="language-plaintext highlighter-rouge">getEmptyNetworkStorage()</code> into the same data that you had on the server, but now on the client!<br />You should make an implementation of this function, update the type parameter for your <code class="language-plaintext highlighter-rouge">ImmersiveHandler</code> to that type, then update the method accordingly.<br />Need an example? Take a look at ImmersiveMC’s internal <code class="language-plaintext highlighter-rouge">ListOfItemsStorage</code>.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ItemSwapAmount</code></td> <td><code class="language-plaintext highlighter-rouge">swap()</code></td> <td>Users can configure the amount of items to swap and can hold their “break block” button to swap an entire stack of items. This object encapsulates that information; simply call <code class="language-plaintext highlighter-rouge">ItemSwapAmount#getNumItemsToSwap()</code> with the stack size of the item in the player’s hand, or pass it to <code class="language-plaintext highlighter-rouge">ImmersiveLogicHelpers#swapItems()</code> and let it do the work!</td> </tr> </tbody> </table></div> <p>Now that you have an idea of everything that goes into an <code class="language-plaintext highlighter-rouge">ImmersiveHandler</code>, implement the provided methods for your Immersive! Want an example? Take a look at ImmersiveMC’s <code class="language-plaintext highlighter-rouge">BrewingStandHandler</code> in your IDE! It’s one of the simplest <code class="language-plaintext highlighter-rouge">ImmersiveHandler</code>s in ImemrsiveMC’s codebase.</p> <h2 id="registering-your-immersivehandler"> <a href="#registering-your-immersivehandler" class="anchor-heading" aria-labelledby="registering-your-immersivehandler"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Registering Your <code class="language-plaintext highlighter-rouge">ImmersiveHandler</code> </h2> <p>This one’s easy! First, make an instance of your <code class="language-plaintext highlighter-rouge">ImmersiveHandler</code> somewhere, you’ll need it!</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">ImmersiveHandler</span><span class="o">&lt;</span><span class="nc">NetworkStorage</span><span class="o">&gt;</span> <span class="n">myHandler</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyHandler</span><span class="o">();</span>
</code></pre></div></div> <p>Then, in your mod’s constructor, let ImmersiveMC know that when it comes time to register, register it! Note that we first check if the current version of ImmersiveMC is compatible with API version <code class="language-plaintext highlighter-rouge">2.0</code>, the API version for ImmersiveMC 1.5.0. Otherwise, we may use a feature that ImmersiveMC no longer has, thus causing a crash or other issue!</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">ImmersiveMCRegistration</span><span class="o">.</span><span class="na">instance</span><span class="o">().</span><span class="na">addImmersiveHandlerRegistrationHandler</span><span class="o">(</span><span class="n">event</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="nc">ImmersiveMCMeta</span><span class="o">.</span><span class="na">instance</span><span class="o">().</span><span class="na">compatibleWithAPIVersion</span><span class="o">(</span><span class="s">"2.0"</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">event</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">myHandler</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre></div></div> <p>Congratulations! Your <code class="language-plaintext highlighter-rouge">ImmersiveHandler</code> is done!</p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
